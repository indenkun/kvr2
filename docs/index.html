<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Calculate and Compare Multiple Definitions of Coefficient of Determination • kvr2</title>
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Calculate and Compare Multiple Definitions of Coefficient of Determination">
<meta name="description" content="Provides functions to calculate nine types of coefficients of determination (R-squared) based on the classification by Kvalseth (1985) DOI:10.1080/00031305.1985.10479448. This package is designed for educational purposes to demonstrate how R-squared values can fluctuate depending on the choice of formula, particularly in power regression models or linear models without an intercept. By providing a comprehensive list of definitions, it helps users understand the mathematical sensitivity of goodness-of-fit indices.">
<meta property="og:description" content="Provides functions to calculate nine types of coefficients of determination (R-squared) based on the classification by Kvalseth (1985) DOI:10.1080/00031305.1985.10479448. This package is designed for educational purposes to demonstrate how R-squared values can fluctuate depending on the choice of formula, particularly in power regression models or linear models without an intercept. By providing a comprehensive list of definitions, it helps users understand the mathematical sensitivity of goodness-of-fit indices.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">kvr2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/Pitfalls_of_R2.html">The Pitfalls of R-squared: Understanding Mathematical Sensitivity</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/indenkun/kvr2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="kvr2-educational-tool-for-exploring-r2-definitions">kvr2: Educational Tool for Exploring <span class="math inline">\(R^2\)</span> Definitions<a class="anchor" aria-label="anchor" href="#kvr2-educational-tool-for-exploring-r2-definitions"></a>
</h1></div>
<!-- badges: start -->

<p>The <code>kvr2</code> package provides functions to calculate nine types of coefficients of determination (<span class="math inline">\(R^2\)</span>) as classified by <strong>Kvalseth (1985)</strong>.</p>
<div class="section level3">
<h3 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h3>
<p>The coefficient of determination, <span class="math inline">\(R^2\)</span>, is one of the most common metrics for assessing model fit. However, its mathematical definition is not unique. While various formulas yield identical results in standard linear regression with an intercept, they can diverge significantly—sometimes producing negative values or values exceeding 1—when applied to:</p>
<ul>
<li>
<strong>Models without an intercept</strong> (No-intercept models)</li>
<li><strong>Power regression models</strong></li>
<li>
<strong>Other fits via transformations</strong> (e.g., log-log models)</li>
</ul>
</div>
<div class="section level3">
<h3 id="scope-and-compatibility">Scope and Compatibility<a class="anchor" aria-label="anchor" href="#scope-and-compatibility"></a>
</h3>
<p>This package is specifically designed for models that can be represented as <code>lm</code> objects in R. This includes:</p>
<ul>
<li>
<strong>Standard Linear Models</strong> (with an intercept)</li>
<li>
<strong>No-intercept Models</strong> (e.g., <code>lm(y ~ x - 1)</code>)</li>
<li>
<strong>Power Regression Models</strong> (fitted via log-transformation, such as <code>lm(log(y) ~ log(x))</code>)</li>
</ul>
<p><strong>Note:</strong> This package does <strong>not</strong> support general non-linear least squares (<code>nls</code>) or other complex non-linear modeling frameworks. It focuses on the mathematical sensitivity of <span class="math inline">\(R^2\)</span> within the context of linear estimation and its common transformations.</p>
</div>
<div class="section level3">
<h3 id="educational-purpose">Educational Purpose<a class="anchor" aria-label="anchor" href="#educational-purpose"></a>
</h3>
<p>The primary goal of this package is <strong>not</strong> to provide a definitive “best” <span class="math inline">\(R^2\)</span> for every scenario, but to serve as an educational resource. By providing a comprehensive list of definitions, it helps users understand the <strong>mathematical sensitivity</strong> of goodness-of-fit indices.</p>
<p>Through this package, users can:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Observe Variability</strong>: See firsthand how the choice of an algebraic formula can lead to different interpretations of the same model.</li>
<li>
<strong>Identify Pitfalls</strong>: Recognize why certain definitions are inappropriate for specific model types (e.g., how the lack of an intercept affects the sum of squares).</li>
<li>
<strong>Analyze Recommendations</strong>: Explore Kvalseth’s arguments for why <span class="math inline">\(R^2_1\)</span> (and <span class="math inline">\(R^2_9\)</span> for robust cases) are often preferred for consistency and comparability.</li>
</ol>
</div>
<div class="section level3">
<h3 id="formulas-included">Formulas Included<a class="anchor" aria-label="anchor" href="#formulas-included"></a>
</h3>
<p>The package calculates nine indices based on Kvalseth (1985):</p>
<ul>
<li>
<strong><span class="math inline">\(R^2_1\)</span></strong> to <strong><span class="math inline">\(R^2_8\)</span></strong>: A classification of existing and historical formulas used in statistical literature and software.</li>
<li>
<strong><span class="math inline">\(R^2_9\)</span></strong>: A robust version of the coefficient of determination based on median absolute deviations, as proposed in the original paper.</li>
</ul>
<hr>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of kvr2 like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"indenkun/kvr2"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage-and-examples">Usage and Examples<a class="anchor" aria-label="anchor" href="#usage-and-examples"></a>
</h2>
<p><code>kvr2</code> provides a simple way to observe how different <span class="math inline">\(R^2\)</span> definitions behave across various model specifications.</p>
<div class="section level3">
<h3 id="id_1-basic-usage-consistency-and-divergence">1. Basic Usage: Consistency and Divergence<a class="anchor" aria-label="anchor" href="#id_1-basic-usage-consistency-and-divergence"></a>
</h3>
<p>In standard linear models with an intercept, most <span class="math inline">\(R^2\)</span> definitions yield identical results. However, they can diverge significantly in models without an intercept or in power regression models.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/indenkun/kvr2" class="external-link">kvr2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Dataset from Kvalseth (1985)</span></span>
<span><span class="va">df1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">37</span>, <span class="fl">52</span>, <span class="fl">59</span>, <span class="fl">83</span>, <span class="fl">92</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Case A: Linear regression with intercept (Values are consistent)</span></span>
<span><span class="va">model_int</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, data <span class="op">=</span> <span class="va">df1</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/r2_kvr2.html">r2</a></span><span class="op">(</span><span class="va">model_int</span><span class="op">)</span></span>
<span><span class="co">#&gt; R2_1 :  0.9808 </span></span>
<span><span class="co">#&gt; R2_2 :  0.9808 </span></span>
<span><span class="co">#&gt; R2_3 :  0.9808 </span></span>
<span><span class="co">#&gt; R2_4 :  0.9808 </span></span>
<span><span class="co">#&gt; R2_5 :  0.9808 </span></span>
<span><span class="co">#&gt; R2_6 :  0.9808 </span></span>
<span><span class="co">#&gt; R2_7 :  0.9966 </span></span>
<span><span class="co">#&gt; R2_8 :  0.9966 </span></span>
<span><span class="co">#&gt; R2_9 :  0.9778</span></span>
<span></span>
<span><span class="co"># Case B: Linear regression without intercept (Values diverge)</span></span>
<span><span class="va">model_no_int</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x</span> <span class="op">-</span> <span class="fl">1</span>, data <span class="op">=</span> <span class="va">df1</span><span class="op">)</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/r2_kvr2.html">r2</a></span><span class="op">(</span><span class="va">model_no_int</span><span class="op">)</span></span>
<span><span class="va">results</span></span>
<span><span class="co">#&gt; R2_1 :  0.9777 </span></span>
<span><span class="co">#&gt; R2_2 :  1.0836 </span></span>
<span><span class="co">#&gt; R2_3 :  1.0830 </span></span>
<span><span class="co">#&gt; R2_4 :  0.9783 </span></span>
<span><span class="co">#&gt; R2_5 :  0.9808 </span></span>
<span><span class="co">#&gt; R2_6 :  0.9808 </span></span>
<span><span class="co">#&gt; R2_7 :  0.9961 </span></span>
<span><span class="co">#&gt; R2_8 :  0.9961 </span></span>
<span><span class="co">#&gt; R2_9 :  0.9717</span></span></code></pre></div>
<p><strong>Observation:</strong> In Case B, notice that <span class="math inline">\(R^2_2\)</span> and <span class="math inline">\(R^2_3\)</span> exceed 1.0. This demonstrates why choosing the correct definition is critical for models without an intercept.</p>
</div>
<div class="section level3">
<h3 id="id_2-accessing-calculated-values">2. Accessing Calculated Values<a class="anchor" aria-label="anchor" href="#id_2-accessing-calculated-values"></a>
</h3>
<p>The <code><a href="reference/r2_kvr2.html">r2()</a></code> function returns a list object. While the output is formatted for readability, you can easily access individual values for further analysis or reporting.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Accessing specific R2 values from the result object</span></span>
<span><span class="va">results</span><span class="op">$</span><span class="va">r2_1</span></span>
<span><span class="co">#&gt;      r2_1 </span></span>
<span><span class="co">#&gt; 0.9776853</span></span>
<span></span>
<span><span class="va">results</span><span class="op">$</span><span class="va">r2_9</span></span>
<span><span class="co">#&gt;      r2_9 </span></span>
<span><span class="co">#&gt; 0.9717156</span></span>
<span></span>
<span><span class="co"># You can also use it in your custom functions or data frames</span></span>
<span><span class="va">my_val</span> <span class="op">&lt;-</span> <span class="va">results</span><span class="op">$</span><span class="va">r2_1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_3-model-comparison-with-error-metrics">3. Model Comparison with Error Metrics<a class="anchor" aria-label="anchor" href="#id_3-model-comparison-with-error-metrics"></a>
</h3>
<p>To complement <span class="math inline">\(R^2\)</span> analysis, use <code><a href="reference/comp_kvr2.html">comp_fit()</a></code> to evaluate models via standard error metrics such as RMSE, MAE, and MSE.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/comp_kvr2.html">comp_fit</a></span><span class="op">(</span><span class="va">model_no_int</span><span class="op">)</span></span>
<span><span class="co">#&gt; RMES :  3.9008 </span></span>
<span><span class="co">#&gt; MAE :  3.6520 </span></span>
<span><span class="co">#&gt; MSE :  18.2593</span></span></code></pre></div>
<p>For details, refer to the documentation for each function.</p>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Kvalseth, T. O. (1985). Cautionary Note about <span class="math inline">\(R^2\)</span>. The American Statistician, 39(4), 279-285. <a href="https://doi.org/10.1080/00031305.1985.10479448" class="external-link">DOI: 10.1080/00031305.1985.10479448</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/indenkun/kvr2/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/indenkun/kvr2/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing kvr2</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Mao Kobayashi <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=kvr2" class="external-link"><img src="https://www.r-pkg.org/badges/version/kvr2" alt="CRAN status"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mao Kobayashi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
